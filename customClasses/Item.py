# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file 'listItem.ui'
#
# Created by: PyQt5 UI code generator 5.15.4
#
# WARNING: Any manual changes made to this file will be lost when pyuic5 is
# run again.  Do not edit this file unless you know what you are doing.


from PyQt5 import QtCore, QtGui, QtWidgets
from os import path

from actions.Action import Action

class ListItem(QtWidgets.QWidget):
    def __init__(self, parent, item : QtWidgets.QListWidgetItem):
        super(ListItem, self).__init__(parent)
        #self.setObjectName("self")
        self.connection = item

        self.gridLayout = QtWidgets.QHBoxLayout(self)

        self.actionImageDisplay = QtWidgets.QGraphicsView(self)
        self.actionImageDisplay.setMaximumSize(QtCore.QSize(self.height() * 2, self.height() * 2))
        self.gridLayout.addWidget(self.actionImageDisplay)

        self.commandDisplay = QtWidgets.QLabel(self)
        self.gridLayout.addWidget(self.commandDisplay)

        self.deleteButton = QtWidgets.QPushButton(self)
        self.deleteButton.setMinimumSize(QtCore.QSize(self.height() * 3, self.height()))
        self.deleteButton.setMaximumSize(QtCore.QSize(self.height() * 3, self.height()))
        self.gridLayout.addWidget(self.deleteButton)

        self.retranslateUi()
        QtCore.QMetaObject.connectSlotsByName(self)

    def retranslateUi(self):
        _translate = QtCore.QCoreApplication.translate
        #self.actionImageDisplay.setText(_translate("self", "ImageLabel"))
        self.deleteButton.setText(_translate("self", "DeleteButton"))
        self.actionImageDisplay.setObjectName("actionImageDisplay")
        self.deleteButton.setObjectName("deleteButton")
        self.commandDisplay.setObjectName("commandDisplay")
        self.gridLayout.setObjectName("gridLayout")

    def completeInfo(self, action : Action):
        self.action = action

        scene = QtWidgets.QGraphicsScene(self)
        pixmap = QtGui.QPixmap(action.iconPath).scaledToHeight(self.actionImageDisplay.height() * 1.7)
        item = QtWidgets.QGraphicsPixmapItem(pixmap)
        scene.addItem(item)
        self.actionImageDisplay.setScene(scene)

        
        self.commandDisplay.setText(action.command)
        self.deleteButton.clicked.connect(self.onDelete)

    def onDelete(self):
        parent = self.connection.parent
        index = parent.row(self.connection)

        parent.takeItem(index)
        del parent.workSpace[index]

